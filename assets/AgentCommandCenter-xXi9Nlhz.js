import{bP as Q,bQ as W,bR as X,bS as Y,bT as q,bU as J,e as a,bV as Z,O as e,U as o,bH as i,V as j,bg as I,bW as ee,Q as d,bX as se,bY as O,a2 as u}from"./index-DHO1YFOi.js";function ne({onAgentClick:z,onNavigate:te}){var M;const{agents:c}=Q(),n=W(),N=X(),x=Y(),{dispatch:D}=q(),{isLive:k}=J(),[m,w]=a.useState(""),[E,R]=a.useState(((M=c[0])==null?void 0:M.id)||""),[g,S]=a.useState(!1),[_,P]=a.useState("medium"),T=async()=>{if(m.trim()){S(!0);try{await D(E,m),w("")}catch{}finally{S(!1)}}},A=a.useMemo(()=>c.filter(s=>s.status!=="offline").length,[c]),U=a.useMemo(()=>x.reduce((s,t)=>s+t.todayTokensIn+t.todayTokensOut,0),[x]),L=a.useMemo(()=>x.reduce((s,t)=>s+t.todayCostUSD,0),[x]),B=a.useMemo(()=>{const s={};for(const t of c)s[t.id]={backlog:0,"em-progresso":0,revisao:0,concluido:0};for(const t of n)s[t.agentId]&&s[t.agentId][t.status]++;return s},[c,n]),V=s=>{const t=x.find(l=>l.agentId===s);return t?t.todayTokensIn+t.todayTokensOut:0},C=a.useMemo(()=>N.slice(0,12).map(s=>{const t=Z[s.status];return{...s,badge:t}}),[N]),v=a.useMemo(()=>n.filter(s=>s.status==="em-progresso"||s.status==="revisao").slice(0,8),[n]),$=a.useMemo(()=>n.filter(s=>s.status==="backlog").length,[n]),F=a.useMemo(()=>n.filter(s=>s.status==="em-progresso").length,[n]),G=a.useMemo(()=>n.filter(s=>s.status==="revisao").length,[n]),H=a.useMemo(()=>n.filter(s=>s.status==="concluido").length,[n]),h={high:{bg:"bg-accent-red/10",border:"border-accent-red/30",text:"text-accent-red",label:"Alta"},medium:{bg:"bg-accent-orange/10",border:"border-accent-orange/30",text:"text-accent-orange",label:"Média"},low:{bg:"bg-accent-blue/10",border:"border-accent-blue/30",text:"text-accent-blue",label:"Baixa"}};return e.jsxs("div",{className:"flex flex-col h-full overflow-hidden",children:[e.jsxs("div",{className:"p-5 border-b border-border-panel bg-bg-base shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"size-9 rounded-md bg-brand-mint/10 border border-brand-mint/20 flex items-center justify-center text-brand-mint shrink-0",children:e.jsx(o,{name:"hub",size:"md"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-black text-text-primary",children:"Mission Control"}),e.jsx("p",{className:"text-[8px] font-bold text-text-secondary uppercase tracking-widest mt-0.5",children:"GERENCIAMENTO DE AGENTES & MISSÕES"})]}),e.jsxs("div",{className:"flex items-center gap-1 ml-2",children:[e.jsx("span",{className:i("w-2 h-2 rounded-full",k?"bg-brand-mint animate-pulse":"bg-text-secondary/30")}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary",children:k?"LIVE":"OFFLINE"})]})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 bg-surface/50 border border-border-panel px-2.5 py-1.5 rounded-sm",children:[e.jsx("span",{className:"text-[8px] font-bold text-text-secondary uppercase",children:"Backlog"}),e.jsx("span",{className:"text-[9px] font-black text-accent-blue font-mono",children:$})]}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-surface/50 border border-border-panel px-2.5 py-1.5 rounded-sm",children:[e.jsx("span",{className:"text-[8px] font-bold text-text-secondary uppercase",children:"Em Prog."}),e.jsx("span",{className:"text-[9px] font-black text-accent-orange font-mono",children:F})]}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-surface/50 border border-border-panel px-2.5 py-1.5 rounded-sm",children:[e.jsx("span",{className:"text-[8px] font-bold text-text-secondary uppercase",children:"REVISÃO"}),e.jsx("span",{className:"text-[9px] font-black text-accent-purple font-mono",children:G})]}),e.jsxs("div",{className:"flex items-center gap-1.5 bg-surface/50 border border-border-panel px-2.5 py-1.5 rounded-sm",children:[e.jsx("span",{className:"text-[8px] font-bold text-text-secondary uppercase",children:"Feito"}),e.jsx("span",{className:"text-[9px] font-black text-brand-mint font-mono",children:H})]})]})]}),e.jsxs("div",{className:"mt-4 p-3 bg-surface/30 border border-border-panel rounded-md space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{name:"send",size:"xs",className:"text-brand-mint"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"NOVA MISSÃO"})]}),e.jsxs("div",{className:"flex items-stretch gap-2",children:[e.jsx("input",{type:"text",value:m,onChange:s=>w(s.target.value),onKeyDown:s=>s.key==="Enter"&&T(),placeholder:"Descreva a missão para o agente...",className:"flex-1 bg-bg-base border border-border-panel rounded-sm px-3 py-2 text-[10px] text-text-primary font-mono placeholder:text-text-secondary/30 focus:outline-none focus:border-brand-mint/30 transition-colors"}),e.jsx("select",{value:E,onChange:s=>R(s.target.value),className:"bg-bg-base border border-border-panel rounded-sm px-2 py-2 text-[9px] text-text-primary font-bold focus:outline-none cursor-pointer",children:c.map(s=>e.jsx("option",{value:s.id,children:s.name},s.id))}),e.jsx("div",{className:"flex bg-bg-base border border-border-panel rounded-sm overflow-hidden",children:["high","medium","low"].map(s=>e.jsx("button",{onClick:()=>P(s),className:i("px-2 py-2 text-[8px] font-black uppercase transition-colors",_===s?`${h[s].bg} ${h[s].text} ${h[s].border}`:"text-text-secondary/40 hover:text-text-secondary"),children:h[s].label},s))}),e.jsxs("button",{onClick:T,disabled:!m.trim()||g,className:i("px-4 py-2 rounded-sm font-bold uppercase tracking-wider text-[9px] transition-all flex items-center gap-1.5 shrink-0",m.trim()&&!g?"bg-brand-mint/10 border border-brand-mint/30 text-brand-mint hover:bg-brand-mint/20":"bg-surface/50 border border-border-panel text-text-secondary/40 cursor-not-allowed"),children:[e.jsx(o,{name:g?"autorenew":"rocket_launch",size:"xs"}),g?"Enviando...":"Dispatch"]})]})]})]}),e.jsxs("div",{className:"flex-grow overflow-y-auto p-5 space-y-5",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(j,{icon:"smart_toy",children:"AGENTES — CARGA DE TRABALHO"}),e.jsxs("div",{className:"flex items-center gap-2 bg-surface/50 border border-border-panel px-2.5 py-1.5 rounded-sm",children:[e.jsx(I,{color:"mint",glow:!0}),e.jsxs("span",{className:"text-[9px] font-bold text-text-secondary uppercase tracking-widest",children:[A,"/",c.length," Online"]})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-4 gap-3",children:c.map(s=>{const t=ee[s.status],l=s.status==="online"||s.status==="busy",p=V(s.id),r=B[s.id]||{backlog:0,"em-progresso":0,revisao:0,concluido:0},y=Object.values(r).reduce((b,f)=>b+f,0);return e.jsxs(d,{className:"p-3 hover:border-brand-mint/30 transition-colors cursor-pointer group",onClick:()=>z(s.id),children:[e.jsxs("div",{className:"flex items-center gap-2.5 mb-3",children:[e.jsx("div",{className:i("size-8 rounded-md border flex items-center justify-center shrink-0",s.role==="coordinator"?"bg-accent-purple/10 border-accent-purple/20 text-accent-purple":"bg-brand-mint/10 border-brand-mint/20 text-brand-mint"),children:e.jsx(o,{name:s.icon||"smart_toy",size:"md"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("p",{className:"text-[11px] font-black text-text-primary truncate group-hover:text-brand-mint transition-colors",children:s.name}),e.jsx(I,{color:t.color,glow:l})]}),e.jsx("p",{className:"text-[8px] text-text-secondary font-mono truncate",children:s.model||"—"})]})]}),e.jsxs("div",{className:"mb-3 px-2 py-1.5 bg-bg-base rounded-sm border border-border-panel/50",children:[e.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-0.5",children:"MISSÃO ATUAL"}),e.jsx("p",{className:"text-[9px] text-text-primary font-medium truncate",children:s.currentMission||"Idle — Aguardando"})]}),y>0&&e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-[7px] font-black uppercase tracking-widest text-text-secondary",children:"Tarefas"}),e.jsx("span",{className:"text-[8px] font-mono text-text-secondary",children:y})]}),e.jsx("div",{className:"flex h-1.5 rounded-full overflow-hidden bg-bg-base",children:se.map(b=>{const f=r[b]/y*100;if(f===0)return null;const K={backlog:"bg-accent-blue/60","em-progresso":"bg-accent-orange/60",revisao:"bg-accent-purple/60",concluido:"bg-brand-mint/60"};return e.jsx("div",{className:i(K[b]),style:{width:`${f}%`}},b)})}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[r["em-progresso"]>0&&e.jsxs("span",{className:"text-[7px] font-bold text-accent-orange",children:[r["em-progresso"]," ativa",r["em-progresso"]>1?"s":""]}),r.revisao>0&&e.jsxs("span",{className:"text-[7px] font-bold text-accent-purple",children:[r.revisao," revisão"]}),r.backlog>0&&e.jsxs("span",{className:"text-[7px] font-bold text-accent-blue",children:[r.backlog," backlog"]})]})]}),e.jsxs("div",{className:"flex items-center justify-between pt-2 border-t border-border-panel/30",children:[e.jsx("span",{className:"text-[7px] font-bold text-text-secondary uppercase",children:"Tokens hoje"}),e.jsx("span",{className:"text-[8px] font-mono text-text-secondary",children:p>0?O(p):"—"})]})]},s.id)})})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-2 gap-5",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(j,{icon:"flag",children:"MISSÕES ATIVAS"}),e.jsx(u,{variant:"orange",size:"xs",children:v.length})]}),e.jsx("div",{className:"space-y-2",children:v.length===0?e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 text-text-secondary",children:[e.jsx(o,{name:"check_circle",size:"lg"}),e.jsx("span",{className:"text-[10px]",children:"Nenhuma missão ativa"})]})}):v.map(s=>{var p;const t=(p=c.find(r=>r.id===s.agentId))==null?void 0:p.name,l=s.status==="revisao";return e.jsx(d,{className:i("p-3 group",l&&"border-accent-purple/20"),children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("div",{className:i("size-7 rounded-sm flex items-center justify-center shrink-0 mt-0.5",l?"bg-accent-purple/10 text-accent-purple":"bg-accent-orange/10 text-accent-orange"),children:e.jsx(o,{name:l?"rate_review":"play_circle",size:"sm"})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[11px] font-medium text-text-primary leading-tight",children:s.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[t&&e.jsxs(u,{variant:"neutral",size:"xs",children:[e.jsx(o,{name:"smart_toy",className:"text-[7px]"})," ",t]}),e.jsx(u,{variant:l?"purple":"orange",size:"xs",children:l?"Revisão":"Em Progresso"})]}),s.messages.length>0&&e.jsx("p",{className:"text-[8px] text-text-secondary mt-1.5 truncate",children:s.messages[s.messages.length-1].content})]}),e.jsx("span",{className:"text-[7px] font-mono text-text-secondary shrink-0",children:s.createdAt})]})},s.id)})})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx(j,{icon:"bolt",children:"PIPELINE DE EXECUÇÃO"}),e.jsx(u,{variant:"blue",size:"xs",children:N.length})]}),e.jsx("div",{className:"space-y-1.5",children:C.length===0?e.jsx(d,{className:"p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 text-text-secondary",children:[e.jsx(o,{name:"terminal",size:"lg"}),e.jsx("span",{className:"text-[10px]",children:"Nenhuma execução registrada"})]})}):C.map(s=>{const t=s.status==="running";return e.jsx(d,{className:i("p-2.5",t&&"border-accent-blue/20 bg-accent-blue/[0.02]"),children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsxs("div",{className:"relative shrink-0",children:[e.jsx(o,{name:s.status==="running"?"play_circle":s.status==="completed"?"check_circle":s.status==="failed"?"error":"pending",size:"xs",className:i(s.status==="running"?"text-accent-blue":s.status==="completed"?"text-brand-mint":s.status==="failed"?"text-accent-red":"text-accent-orange")}),t&&e.jsx("span",{className:"absolute -top-0.5 -right-0.5 w-1.5 h-1.5 rounded-full bg-accent-blue animate-ping"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-[10px] text-text-primary leading-tight truncate",children:s.task}),e.jsx("p",{className:"text-[8px] text-text-secondary font-mono mt-0.5",children:s.agentName})]}),s.duration&&e.jsx("span",{className:"text-[8px] font-mono text-text-secondary shrink-0",children:s.duration}),e.jsx(u,{variant:s.badge.variant,size:"xs",children:s.badge.label})]})},s.id)})})]})]}),e.jsxs("div",{children:[e.jsx(j,{icon:"token",className:"mb-3",children:"CONSUMO DE RECURSOS"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs(d,{className:"p-3",children:[e.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-1",children:"Tokens Hoje"}),e.jsx("p",{className:"text-lg font-black text-text-primary font-mono",children:O(U)})]}),e.jsxs(d,{className:"p-3",children:[e.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-1",children:"Custo Hoje"}),e.jsxs("p",{className:"text-lg font-black text-text-primary font-mono",children:["$",L.toFixed(2)]})]}),e.jsxs(d,{className:"p-3",children:[e.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-1",children:"Agentes Online"}),e.jsxs("p",{className:"text-lg font-black text-brand-mint font-mono",children:[A,e.jsxs("span",{className:"text-text-secondary text-xs",children:["/",c.length]})]})]}),e.jsxs(d,{className:"p-3",children:[e.jsx("p",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-1",children:"TOTAL MISSÕES"}),e.jsx("p",{className:"text-lg font-black text-text-primary font-mono",children:n.length})]})]})]})]})]})}export{ne as default};
