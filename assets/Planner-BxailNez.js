import{e as o,bG as N,O as e,U as d,bH as l,V as c,bI as q,bJ as U}from"./index-DHO1YFOi.js";function _(i){return{title:i,summary:`Plano gerado para "${i}". Este é um plano mockado que será substituído pela integração com Gemini.`,objectives:[`Definir escopo e entregáveis de "${i}"`,"Mapear dependências e recursos necessários","Estabelecer timeline realista com checkpoints"],steps:[{text:"Levantar requisitos e restrições",done:!1},{text:"Criar documento de escopo",done:!1},{text:"Validar com stakeholders",done:!1},{text:"Executar sprint 1 (MVP)",done:!1},{text:"Revisar e iterar",done:!1}],risks:[{risk:"Escopo mal definido",mitigation:"Documento de requisitos aprovado antes de iniciar"},{risk:"Prazo apertado",mitigation:"Priorizar MVP, cortar nice-to-haves"},{risk:"Dependência externa",mitigation:"Identificar alternativas e plano B"}],checklist:["Requisitos documentados","Aprovação do plano","Recursos alocados","Primeira entrega validada","Retrospectiva feita"],suggestedTasks:[{title:`[${i}] Levantar requisitos`,tag:"PLANEJAMENTO",priority:"high",deadline:new Date(Date.now()+2*864e5).toISOString().slice(0,10)},{title:`[${i}] Criar documento de escopo`,tag:"PLANEJAMENTO",priority:"high",deadline:new Date(Date.now()+4*864e5).toISOString().slice(0,10)},{title:`[${i}] Executar MVP`,tag:"DEV",priority:"medium",deadline:new Date(Date.now()+10*864e5).toISOString().slice(0,10)}]}}const K=({projects:i,activeProjectId:M,addTasks:O})=>{const[x,h]=o.useState(""),[w,g]=o.useState(""),[k,S]=o.useState("semana"),[z,P]=o.useState(""),[j,D]=o.useState(M),[r,m]=o.useState(null),[u,b]=o.useState([]),[p,f]=o.useState([]),[y,E]=o.useState(!1);o.useEffect(()=>{N().then(f)},[]);const v=async t=>{await U(t),f(await N())},R=async()=>{var A;if(!x.trim())return;const t=new Date().toISOString(),s=((A=crypto==null?void 0:crypto.randomUUID)==null?void 0:A.call(crypto))??`plan-${Date.now()}`,a=_(x.trim()),n={id:s,...a,context:w.trim(),projectId:j,exported:!1,createdAt:t,updatedAt:t};m(n),b(n.steps.map(H=>({...H}))),await v(n)},T=async t=>{const s=u.map((a,n)=>n===t?{...a,done:!a.done}:a);if(b(s),r){const a={...r,steps:s,updatedAt:new Date().toISOString()};m(a),await v(a)}},L=async()=>{if(!r)return;const t=r.suggestedTasks.map(a=>({title:a.title,tag:a.tag,projectId:j,status:"assigned",priority:a.priority,deadline:a.deadline,assignee:"MA",dependencies:0}));O(t);const s={...r,exported:!0,updatedAt:new Date().toISOString()};m(s),await v(s)},C=()=>{h(""),g(""),S("semana"),P(""),m(null),b([])},V=t=>{m(t),b(t.steps.map(s=>({...s}))),h(t.title),g(t.context),D(t.projectId),E(!1)},$=async t=>{await q(t),f(await N()),(r==null?void 0:r.id)===t&&C()},G=t=>t==="high"?"text-accent-red":t==="medium"?"text-accent-orange":"text-text-secondary",I=u.length>0?Math.round(u.filter(t=>t.done).length/u.length*100):0;return e.jsxs("div",{className:"space-y-6 p-1",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-text-primary",children:"Planejador de Missões"}),e.jsx("p",{className:"text-xs text-text-secondary mt-0.5",children:"Ideia → Plano → Tarefas → Execução"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>E(!y),className:l("flex items-center gap-1.5 px-3 py-1.5 rounded text-xs font-medium transition-colors border",y?"bg-accent-blue/10 border-accent-blue/30 text-accent-blue":"bg-surface border-border-card text-text-secondary hover:text-text-primary"),children:[e.jsx(d,{name:"history",size:"sm"}),"Histórico",p.length>0&&e.jsx("span",{className:"text-[9px] font-bold bg-surface border border-border-panel px-1.5 py-0.5 rounded-sm",children:p.length})]}),r&&e.jsxs("button",{onClick:C,className:"flex items-center gap-1.5 px-3 py-1.5 rounded bg-surface hover:bg-surface-hover border border-border-card text-text-secondary text-xs transition-colors",children:[e.jsx(d,{name:"restart_alt",size:"sm"}),"Nova Missão"]})]})]}),y&&e.jsxs("div",{className:"bg-surface border border-border-card rounded-lg p-4",children:[e.jsx(c,{children:"PLANOS SALVOS"}),p.length===0?e.jsx("p",{className:"text-xs text-text-secondary mt-3",children:"Nenhum plano salvo ainda."}):e.jsx("div",{className:"mt-3 space-y-2",children:p.map(t=>{const s=i.find(n=>n.id===t.projectId),a=t.steps.length>0?Math.round(t.steps.filter(n=>n.done).length/t.steps.length*100):0;return e.jsxs("div",{className:l("flex items-center justify-between px-3 py-2.5 rounded bg-bg-base border border-border-panel group cursor-pointer hover:border-accent-blue/30 transition-colors",(r==null?void 0:r.id)===t.id&&"border-accent-blue/40 bg-accent-blue/5"),onClick:()=>V(t),children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("div",{className:"size-2 rounded-full shrink-0",style:{backgroundColor:(s==null?void 0:s.color)??"#888"}}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-medium text-text-primary truncate",children:t.title}),e.jsxs("p",{className:"text-[10px] text-text-secondary mt-0.5",children:[new Date(t.createdAt).toLocaleDateString("pt-BR",{day:"2-digit",month:"short",year:"numeric"}),t.exported&&e.jsx("span",{className:"ml-2 text-brand-mint",children:"✓ Exportado"})]})]})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-16 h-1.5 bg-border-panel rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-brand-mint rounded-full transition-all",style:{width:`${a}%`}})}),e.jsxs("span",{className:"text-[10px] font-bold text-text-secondary",children:[a,"%"]})]}),e.jsx("button",{onClick:n=>{n.stopPropagation(),$(t.id)},className:"opacity-0 group-hover:opacity-100 text-text-secondary hover:text-accent-red transition-all p-1",children:e.jsx(d,{name:"delete",size:"sm"})})]})]},t.id)})})]}),!r&&e.jsxs("div",{className:"bg-surface border border-border-card rounded-lg p-5 space-y-4",children:[e.jsx(c,{children:"ENTRADA DA MISSÃO"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1.5",children:"Título"}),e.jsx("input",{type:"text",value:x,onChange:t=>h(t.target.value),placeholder:"Ex: Lançar MVP do produto",className:"w-full bg-bg-base border border-border-panel rounded px-3 py-2 text-sm text-text-primary placeholder:text-text-secondary/50 focus:outline-none focus:border-accent-blue transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1.5",children:"Contexto"}),e.jsx("textarea",{value:w,onChange:t=>g(t.target.value),placeholder:"Descreva o objetivo, restrições, recursos disponíveis...",rows:3,className:"w-full bg-bg-base border border-border-panel rounded px-3 py-2 text-sm text-text-primary placeholder:text-text-secondary/50 focus:outline-none focus:border-accent-blue transition-colors resize-none"})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1.5",children:"Prazo"}),e.jsx("div",{className:"flex gap-2",children:["hoje","semana","custom"].map(t=>e.jsx("button",{onClick:()=>S(t),className:l("px-3 py-1.5 rounded text-xs font-medium transition-colors border",k===t?"bg-accent-blue/20 border-accent-blue text-accent-blue":"bg-surface-hover border-border-panel text-text-secondary hover:text-text-primary"),children:t==="hoje"?"Hoje":t==="semana"?"Esta semana":"Data"},t))}),k==="custom"&&e.jsx("input",{type:"date",value:z,onChange:t=>P(t.target.value),className:"mt-2 w-full bg-bg-base border border-border-panel rounded px-3 py-1.5 text-sm text-text-primary focus:outline-none focus:border-accent-blue transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs font-medium text-text-secondary mb-1.5",children:"Projeto"}),e.jsx("select",{value:j,onChange:t=>D(t.target.value),className:"w-full bg-bg-base border border-border-panel rounded px-3 py-2 text-sm text-text-primary focus:outline-none focus:border-accent-blue transition-colors",children:i.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))})]})]}),e.jsxs("button",{onClick:R,disabled:!x.trim(),className:l("w-full flex items-center justify-center gap-2 py-2.5 rounded font-medium text-sm transition-all",x.trim()?"bg-brand-mint text-black hover:opacity-90":"bg-surface-hover text-text-secondary cursor-not-allowed"),children:[e.jsx(d,{name:"auto_awesome",size:"sm"}),"Gerar Plano"]})]}),r&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-surface border border-border-card rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(c,{children:"PROGRESSO"}),e.jsxs("span",{className:"text-xs font-bold text-brand-mint",children:[I,"%"]})]}),e.jsx("div",{className:"w-full h-2 bg-bg-base rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-gradient-to-r from-brand-mint/60 to-brand-mint rounded-full transition-all duration-300",style:{width:`${I}%`}})})]}),e.jsxs("div",{className:"bg-surface border border-border-card rounded-lg p-4",children:[e.jsx(c,{children:"SUMÁRIO"}),e.jsx("p",{className:"text-sm text-text-primary mt-2",children:r.summary})]}),e.jsxs("div",{className:"bg-surface border border-border-card rounded-lg p-4",children:[e.jsx(c,{children:"Objetivos"}),e.jsx("ul",{className:"mt-2 space-y-1.5",children:r.objectives.map((t,s)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-text-primary",children:[e.jsx(d,{name:"target",size:"sm",className:"text-accent-blue mt-0.5 shrink-0"}),t]},s))})]}),e.jsxs("div",{className:"bg-surface border border-border-card rounded-lg p-4",children:[e.jsx(c,{children:"Passos"}),e.jsx("ol",{className:"mt-2 space-y-2",children:u.map((t,s)=>e.jsxs("li",{onClick:()=>T(s),className:"flex items-center gap-3 cursor-pointer group",children:[e.jsx("div",{className:l("w-5 h-5 rounded border flex items-center justify-center shrink-0 transition-colors",t.done?"bg-brand-mint/20 border-brand-mint":"border-border-panel group-hover:border-text-secondary"),children:t.done&&e.jsx(d,{name:"check",size:"sm",className:"text-brand-mint"})}),e.jsxs("span",{className:l("text-sm transition-colors",t.done?"text-text-secondary line-through":"text-text-primary"),children:[s+1,". ",t.text]})]},s))})]}),e.jsxs("div",{className:"bg-surface border border-border-card rounded-lg p-4",children:[e.jsx(c,{children:"RISCOS E MITIGAÇÕES"}),e.jsx("div",{className:"mt-2 space-y-3",children:r.risks.map((t,s)=>e.jsxs("div",{className:"text-sm",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(d,{name:"warning",size:"sm",className:"text-accent-orange mt-0.5 shrink-0"}),e.jsx("span",{className:"text-text-primary font-medium",children:t.risk})]}),e.jsxs("div",{className:"flex items-start gap-2 ml-6 mt-0.5",children:[e.jsx(d,{name:"shield",size:"sm",className:"text-brand-mint mt-0.5 shrink-0"}),e.jsx("span",{className:"text-text-secondary",children:t.mitigation})]})]},s))})]}),e.jsxs("div",{className:"bg-surface border border-border-card rounded-lg p-4",children:[e.jsx(c,{children:"Checklist Final"}),e.jsx("ul",{className:"mt-2 space-y-1.5",children:r.checklist.map((t,s)=>e.jsxs("li",{className:"flex items-center gap-2 text-sm text-text-primary",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-accent-blue shrink-0"}),t]},s))})]}),e.jsxs("div",{className:"bg-surface border border-border-card rounded-lg p-4",children:[e.jsx(c,{children:"Tasks Sugeridas"}),e.jsx("div",{className:"mt-2 space-y-2",children:r.suggestedTasks.map((t,s)=>e.jsxs("div",{className:"flex items-center justify-between px-3 py-2 rounded bg-bg-base border border-border-panel",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:l("text-xs font-bold uppercase",G(t.priority)),children:t.priority[0]}),e.jsx("span",{className:"text-sm text-text-primary",children:t.title})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-text-secondary",children:t.tag}),e.jsx("span",{className:"text-xs text-text-secondary",children:t.deadline})]})]},s))})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("button",{onClick:L,disabled:r.exported,className:l("flex-1 flex items-center justify-center gap-2 py-2.5 rounded font-medium text-sm transition-all",r.exported?"bg-brand-mint/20 text-brand-mint cursor-default":"bg-brand-mint text-black hover:opacity-90"),children:[e.jsx(d,{name:r.exported?"check_circle":"view_kanban",size:"sm"}),r.exported?"Enviado para Kanban":"Enviar para Kanban"]}),e.jsxs("button",{disabled:!0,className:"flex-1 flex items-center justify-center gap-2 py-2.5 rounded font-medium text-sm bg-surface-hover text-text-secondary cursor-not-allowed border border-border-panel",children:[e.jsx(d,{name:"event",size:"sm"}),"Criar Eventos"]})]})]})]})};export{K as default};
