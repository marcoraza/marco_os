import{a as o,j as e}from"./vendor-motion-Bf_hqqYm.js";import{u as E,h as $,S as g,K as H,I as a,B as j,r as V,c as A,C as m,i as X,n as F,a as k,t as Q,v as q,w as Y,x as W,y as Z,z as J,A as ee,D as se,E as _,q as z,o as te}from"./index-Dv6BZTtJ.js";import{T as ae}from"./TabNav-CqxIKVp8.js";import"./vendor-charts-CffnG748.js";const U={high:{label:"P0",variant:"red",color:"bg-accent-red/60"},medium:{label:"P1",variant:"orange",color:"bg-accent-orange/60"},low:{label:"P2",variant:"neutral",color:"bg-text-secondary/30"}},ne={info:"text-text-secondary",success:"text-brand-mint",error:"text-accent-red",progress:"text-accent-orange"};function re({agentId:n}){const{agents:b}=E(),t=b.find(i=>i.id===n),x=$((t==null?void 0:t.role)==="coordinator"?void 0:n),[p,s]=o.useState(new Set),r=o.useMemo(()=>{const i={backlog:[],"em-progresso":[],revisao:[],concluido:[]};for(const h of x)i[h.status].push(h);return i},[x]),c=i=>{s(h=>{const u=new Set(h);return u.has(i)?u.delete(i):u.add(i),u})};return e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{icon:"view_kanban",children:"KANBAN"}),e.jsx("div",{className:"flex gap-3 items-stretch",children:H.map(i=>{const h=V[i],u=r[i];return p.has(i)?e.jsxs("div",{className:"w-12 shrink-0 bg-bg-base rounded-lg border border-border-panel flex flex-col items-center py-3 gap-3 cursor-pointer hover:border-text-secondary/30 transition-all",onClick:()=>c(i),children:[e.jsx(a,{name:"chevron_right",size:"xs",className:"text-text-secondary"}),e.jsx(j,{variant:h.variant,size:"xs",children:u.length}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary",style:{writingMode:"vertical-lr",textOrientation:"mixed"},children:h.label}),e.jsxs("div",{className:"flex flex-col gap-1 mt-auto px-1.5 w-full",children:[u.slice(0,6).map(f=>e.jsx("div",{className:A("h-[3px] rounded-full w-full",U[f.priority].color),title:f.title},f.id)),u.length>6&&e.jsxs("span",{className:"text-[7px] text-text-secondary text-center",children:["+",u.length-6]})]})]},i):e.jsxs("div",{className:"flex-1 flex flex-col gap-2 min-w-0 transition-all duration-200",children:[e.jsxs("div",{className:"flex items-center gap-2 px-1",children:[e.jsx("button",{onClick:()=>c(i),className:"p-0.5 rounded hover:bg-surface transition-colors text-text-secondary hover:text-text-primary",children:e.jsx(a,{name:"expand_more",size:"xs"})}),e.jsx(a,{name:h.icon,size:"xs",className:"text-text-secondary"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:h.label}),e.jsx(j,{variant:h.variant,size:"xs",children:u.length})]}),e.jsxs("div",{className:"flex flex-col gap-2 min-h-[200px] bg-bg-base rounded-lg border border-border-panel p-2",children:[u.length===0?e.jsxs("div",{className:"flex flex-col items-center justify-center flex-1 gap-2 text-text-secondary py-8",children:[e.jsx(a,{name:"inbox",size:"md"}),e.jsx("span",{className:"text-[10px]",children:"Sem tarefas"})]}):u.map(f=>{const N=U[f.priority],C=f.messages.slice(-2);return e.jsxs(m,{className:"p-3 space-y-2","data-status":f.status,children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("span",{className:"text-[11px] text-text-primary font-medium leading-tight",children:f.title}),e.jsx(j,{variant:N.variant,size:"xs",children:N.label})]}),C.length>0&&e.jsx("div",{className:"space-y-1",children:C.map(d=>e.jsx("div",{className:"flex items-start gap-1.5",children:e.jsx("span",{className:A("text-[9px] leading-tight",ne[d.type]),children:d.content})},d.id))}),e.jsx("div",{className:"text-[8px] font-mono text-text-secondary",children:f.createdAt})]},f.id)}),e.jsxs("button",{className:"flex items-center justify-center gap-1 py-1.5 rounded text-text-secondary/40 hover:text-brand-mint hover:bg-brand-mint/5 transition-colors",children:[e.jsx(a,{name:"add",size:"xs"}),e.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest",children:"Adicionar"})]})]})]},i)})})]})}function ce({agentId:n}){const{agents:b}=E(),t=b.find(s=>s.id===n),x=X((t==null?void 0:t.role)==="coordinator"?void 0:n),p=o.useMemo(()=>{const s={running:0,completed:0,failed:0,pending:0};for(const r of x)s[r.status]++;return s},[x]);return x.length===0?e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{icon:"terminal",children:"EXECUÇÕES"}),e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-3 text-text-secondary",children:[e.jsx(a,{name:"terminal",size:"lg"}),e.jsx("span",{className:"text-[11px]",children:"Nenhuma execução registrada"})]})})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{icon:"terminal",children:"EXECUÇÕES"}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[e.jsx("div",{className:"xl:col-span-2 space-y-2",children:x.map(s=>{const r=F[s.status];return e.jsxs(m,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-[11px] text-text-primary font-medium",children:s.task}),e.jsxs(j,{variant:r.variant,size:"sm",children:[e.jsx(a,{name:r.icon,size:"xs"}),r.label]})]}),s.output&&e.jsx("div",{className:"bg-surface rounded border border-border-panel p-2",children:e.jsx("span",{className:"text-[10px] font-mono text-text-secondary",children:s.output})}),s.error&&e.jsx("div",{className:"bg-accent-red/5 rounded border border-accent-red/20 p-2",children:e.jsx("span",{className:"text-[10px] font-mono text-accent-red",children:s.error})}),e.jsxs("div",{className:"flex items-center gap-4 text-[9px] text-text-secondary",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{name:"schedule",size:"xs"}),e.jsx("span",{className:"font-mono",children:s.startedAt})]}),s.completedAt&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{name:"check",size:"xs"}),e.jsx("span",{className:"font-mono",children:s.completedAt})]}),s.duration&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{name:"timer",size:"xs"}),e.jsx("span",{className:"font-mono",children:s.duration})]})]})]},s.id)})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(m,{className:"p-4 space-y-4",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"Resumo"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{color:"blue",glow:!0}),e.jsx("span",{className:"text-[10px] text-text-secondary",children:"Executando"})]}),e.jsx("span",{className:"text-xs font-mono text-text-primary",children:p.running})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{color:"mint",glow:!0}),e.jsx("span",{className:"text-[10px] text-text-secondary",children:"Concluído"})]}),e.jsx("span",{className:"text-xs font-mono text-text-primary",children:p.completed})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{color:"red",glow:!0}),e.jsx("span",{className:"text-[10px] text-text-secondary",children:"Falhou"})]}),e.jsx("span",{className:"text-xs font-mono text-text-primary",children:p.failed})]})]})]}),e.jsxs(m,{className:"p-4 space-y-2",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"Filtros"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:Object.keys(F).map(s=>{const r=F[s];return e.jsxs("button",{className:"flex items-center gap-1 px-2 py-1 rounded border border-border-panel bg-bg-base text-text-secondary hover:text-brand-mint hover:border-brand-mint/30 transition-colors",children:[e.jsx(a,{name:r.icon,size:"xs"}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:r.label})]},s)})})]})]})]})]})}function ie({agentId:n}){const{agents:b}=E(),t=b.find(l=>l.id===n),x=Q((t==null?void 0:t.role)==="coordinator"?void 0:n),{updateCronJob:p,createCronJob:s,deleteCronJob:r}=q(),[c,i]=o.useState(null),[h,u]=o.useState(""),[y,f]=o.useState(""),[N,C]=o.useState(!1),[d,v]=o.useState(!1),[w,O]=o.useState(""),[S,R]=o.useState(""),M=o.useMemo(()=>{const l={ok:0,warning:0,failed:0,paused:0};for(const T of x)l[T.status]++;return l},[x]),K=l=>{i(l.id),u(l.name),f(l.schedule),C(l.status==="paused")},D=()=>{i(null),u(""),f(""),C(!1)},G=l=>{p({...l,name:h,schedule:y,status:N?"paused":l.status==="paused"?"ok":l.status}),D()},P=()=>{!w.trim()||!S.trim()||(s({name:w,schedule:S,lastRun:"",nextRun:"",status:"ok",integration:"OpenClaw",agentId:n}),O(""),R(""),v(!1))};return x.length===0&&!d?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{icon:"schedule",children:"CRON JOBS"}),e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-1 px-2.5 py-1 rounded border border-border-panel/50 text-text-secondary hover:text-brand-mint hover:border-brand-mint/20 hover:bg-brand-mint/5 transition-colors",children:[e.jsx(a,{name:"add",size:"xs"}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Novo Job"})]})]}),e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-3 text-text-secondary",children:[e.jsx(a,{name:"schedule",size:"lg"}),e.jsx("span",{className:"text-[11px]",children:"Nenhum cron job configurado"})]})})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{icon:"schedule",children:"CRON JOBS"}),e.jsxs("button",{onClick:()=>v(!0),className:"flex items-center gap-1 px-2.5 py-1 rounded border border-border-panel/50 text-text-secondary hover:text-brand-mint hover:border-brand-mint/20 hover:bg-brand-mint/5 transition-colors",children:[e.jsx(a,{name:"add",size:"xs"}),e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest",children:"Novo Job"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"xl:col-span-2 space-y-2",children:[d&&e.jsxs(m,{className:"p-4 space-y-3 border-brand-mint/20",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-brand-mint",children:"Novo Cron Job"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:w,onChange:l=>O(l.target.value),placeholder:"Nome do job...",className:"w-full bg-bg-base border border-border-panel rounded px-2 py-1.5 text-[10px] text-text-primary font-mono placeholder:text-text-secondary/30 focus:outline-none focus:border-brand-mint/30 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1",children:"Schedule (cron)"}),e.jsx("input",{type:"text",value:S,onChange:l=>R(l.target.value),placeholder:"*/5 * * * *",className:"w-full bg-bg-base border border-border-panel rounded px-2 py-1.5 text-[10px] text-text-primary font-mono placeholder:text-text-secondary/30 focus:outline-none focus:border-brand-mint/30 transition-colors"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:P,disabled:!w.trim()||!S.trim(),className:A("flex items-center gap-1 px-3 py-1.5 rounded text-[9px] font-bold uppercase tracking-wider transition-colors",w.trim()&&S.trim()?"bg-brand-mint/10 border border-brand-mint/30 text-brand-mint hover:bg-brand-mint/20":"bg-surface border border-border-panel text-text-secondary/40 cursor-not-allowed"),children:[e.jsx(a,{name:"check",size:"xs"})," Criar"]}),e.jsxs("button",{onClick:()=>{v(!1),O(""),R("")},className:"flex items-center gap-1 px-3 py-1.5 rounded border border-border-panel text-[9px] font-bold uppercase tracking-wider text-text-secondary hover:text-text-primary transition-colors",children:[e.jsx(a,{name:"close",size:"xs"})," Cancelar"]})]})]}),x.map(l=>{const T=Y[l.status],I=c===l.id;return e.jsx(m,{className:A("p-4 space-y-3 transition-colors",I&&"border-brand-mint/20"),children:I?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1",children:"Nome"}),e.jsx("input",{type:"text",value:h,onChange:L=>u(L.target.value),className:"w-full bg-bg-base border border-border-panel rounded px-2 py-1.5 text-[10px] text-text-primary font-mono focus:outline-none focus:border-brand-mint/30 transition-colors"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary block mb-1",children:"Schedule"}),e.jsx("input",{type:"text",value:y,onChange:L=>f(L.target.value),className:"w-full bg-bg-base border border-border-panel rounded px-2 py-1.5 text-[10px] text-text-primary font-mono focus:outline-none focus:border-brand-mint/30 transition-colors"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:()=>C(!N),className:A("relative w-8 h-4 rounded-full transition-colors",N?"bg-text-secondary/30":"bg-brand-mint/40"),children:e.jsx("span",{className:A("absolute top-0.5 left-0.5 w-3 h-3 rounded-full bg-white transition-transform",!N&&"translate-x-4")})}),e.jsx("span",{className:"text-[9px] text-text-secondary font-bold",children:N?"PAUSADO":"ATIVO"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("button",{onClick:()=>G(l),className:"flex items-center gap-1 px-3 py-1.5 rounded bg-brand-mint/10 border border-brand-mint/30 text-brand-mint text-[9px] font-bold uppercase tracking-wider hover:bg-brand-mint/20 transition-colors",children:[e.jsx(a,{name:"check",size:"xs"})," Salvar"]}),e.jsxs("button",{onClick:D,className:"flex items-center gap-1 px-3 py-1.5 rounded border border-border-panel text-[9px] font-bold uppercase tracking-wider text-text-secondary hover:text-text-primary transition-colors",children:[e.jsx(a,{name:"close",size:"xs"})," Cancelar"]}),e.jsxs("button",{onClick:()=>{r(l.id),D()},className:"flex items-center gap-1 px-3 py-1.5 rounded border border-accent-red/20 text-[9px] font-bold uppercase tracking-wider text-accent-red/60 hover:text-accent-red hover:bg-accent-red/5 transition-colors ml-auto",children:[e.jsx(a,{name:"delete",size:"xs"})," Excluir"]})]})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-[11px] text-text-primary font-medium",children:l.name}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("button",{onClick:()=>K(l),className:"p-1 rounded text-text-secondary/40 hover:text-brand-mint hover:bg-brand-mint/5 transition-colors",title:"Editar",children:e.jsx(a,{name:"edit",size:"xs"})}),e.jsxs(j,{variant:T.variant,size:"sm",children:[e.jsx(a,{name:T.icon,size:"xs"}),T.label]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(j,{variant:"neutral",size:"xs",children:l.integration}),e.jsx("span",{className:"text-[10px] font-mono text-text-secondary",children:l.schedule})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-bg-base rounded p-2",children:[e.jsx("div",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-1",children:"ÚLTIMA EXECUÇÃO"}),e.jsx("div",{className:"text-[10px] font-mono text-text-primary",children:l.lastRun||"—"})]}),e.jsxs("div",{className:"bg-bg-base rounded p-2",children:[e.jsx("div",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-1",children:"PRÓXIMA EXECUÇÃO"}),e.jsx("div",{className:"text-[10px] font-mono text-text-primary",children:l.nextRun||"—"})]})]})]})},l.id)})]}),e.jsx("div",{children:e.jsxs(m,{className:"p-4 space-y-4",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"Status dos Jobs"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{color:"mint",glow:!0}),e.jsx("span",{className:"text-[10px] text-text-secondary",children:"Saudável"})]}),e.jsx("span",{className:"text-xs font-mono text-text-primary",children:M.ok})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{color:"orange",glow:!0}),e.jsx("span",{className:"text-[10px] text-text-secondary",children:"Alertas"})]}),e.jsx("span",{className:"text-xs font-mono text-text-primary",children:M.warning})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{color:"red",glow:!0}),e.jsx("span",{className:"text-[10px] text-text-secondary",children:"Falhou"})]}),e.jsx("span",{className:"text-xs font-mono text-text-primary",children:M.failed})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{color:"blue",glow:!0}),e.jsx("span",{className:"text-[10px] text-text-secondary",children:"Pausados"})]}),e.jsx("span",{className:"text-xs font-mono text-text-primary",children:M.paused})]})]})]})})]})]})}function le({agentId:n}){const{agents:b}=E(),t=b.find(s=>s.id===n),x=W((t==null?void 0:t.role)==="coordinator"?void 0:n),p=o.useMemo(()=>{const s={ok:0,late:0,missed:0};let r=0;for(const i of x)s[i.status]++,r+=i.latencyMs;const c=x.length>0?Math.round(r/x.length):0;return{...s,avgLatency:c}},[x]);return x.length===0?e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{icon:"wifi_tethering",children:"HEARTBEAT"}),e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-3 text-text-secondary",children:[e.jsx(a,{name:"wifi_tethering",size:"lg"}),e.jsx("span",{className:"text-[11px]",children:"Nenhum heartbeat registrado"})]})})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{icon:"wifi_tethering",children:"HEARTBEAT"}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[e.jsx("div",{className:"xl:col-span-2 space-y-2",children:x.map(s=>{const r=Z[s.status];return e.jsxs(m,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[11px] text-text-primary font-medium",children:s.agentName}),e.jsxs(j,{variant:r.variant,size:"sm",children:[e.jsx(a,{name:r.icon,size:"xs"}),r.label]})]}),e.jsxs("div",{className:"flex items-center gap-3 text-[9px] text-text-secondary",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{name:"schedule",size:"xs"}),e.jsx("span",{className:"font-mono",children:s.ts})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{name:"speed",size:"xs"}),e.jsxs("span",{className:"font-mono",children:[s.latencyMs,"ms"]})]})]})]}),s.note&&e.jsx("div",{className:"mt-2 text-[10px] text-text-secondary italic",children:s.note})]},s.id)})}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(m,{className:"p-4 space-y-4",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"SLO Target"}),e.jsx("div",{className:"bg-bg-base rounded p-2 text-center",children:e.jsx("span",{className:"text-[10px] font-mono text-brand-mint",children:"< 60s"})})]}),e.jsxs(m,{className:"p-4 space-y-4",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"Status Atual"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{color:"mint",glow:!0}),e.jsx("span",{className:"text-[10px] text-text-secondary",children:"OK"})]}),e.jsx("span",{className:"text-xs font-mono text-text-primary",children:p.ok})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{color:"orange",glow:!0}),e.jsx("span",{className:"text-[10px] text-text-secondary",children:"Atrasado"})]}),e.jsx("span",{className:"text-xs font-mono text-text-primary",children:p.late})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(k,{color:"red",glow:!0}),e.jsx("span",{className:"text-[10px] text-text-secondary",children:"Perdido"})]}),e.jsx("span",{className:"text-xs font-mono text-text-primary",children:p.missed})]})]})]}),e.jsxs(m,{className:"p-4 space-y-2",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"LATÊNCIA MÉDIA"}),e.jsxs("div",{className:"text-sm font-mono text-text-primary",children:[p.avgLatency,"ms"]})]})]})]})]})}const B={daily:{variant:"mint",label:"DAILY"},"long-term":{variant:"blue",label:"LONG-TERM"},config:{variant:"neutral",label:"CONFIG"},log:{variant:"orange",label:"LOG"}};function xe(n){return n.includes("memory/20")?"daily":n.includes("MEMORY.md")?"long-term":n.includes("config")?"config":"log"}function oe({agentId:n}){const{memorySearch:b,isLive:t}=J(),[x,p]=o.useState(null),[s,r]=o.useState(""),[c,i]=o.useState(null),[h,u]=o.useState(!1);o.useEffect(()=>{t&&(u(!0),b(s||n).then(({results:d})=>{const v=d.map((w,O)=>({id:`live-${O}`,agentId:n,path:w.path,kind:xe(w.path),updatedAt:new Date().toLocaleDateString("pt-BR"),size:`${w.snippet.length}b`,summary:w.snippet.slice(0,200)}));p(v)}).catch(()=>p(null)).finally(()=>u(!1)))},[t,n,s,b]);const[y,f]=o.useState("");o.useEffect(()=>{const d=setTimeout(()=>r(y),400);return()=>clearTimeout(d)},[y]);const N=x??ee(n),C=o.useMemo(()=>c?N.filter(d=>d.kind===c):N,[N,c]);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{icon:"memory",children:"MEMÓRIA"}),t?e.jsx(j,{variant:"mint",size:"sm",children:"LIVE"}):e.jsx(j,{variant:"neutral",size:"sm",children:"MOCK"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"xl:col-span-2 space-y-2",children:[h&&e.jsx(m,{className:"p-4 text-center text-text-secondary text-[10px]",children:"Buscando artefatos..."}),!h&&C.length===0&&e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-3 text-text-secondary",children:[e.jsx(a,{name:"memory",size:"lg"}),e.jsx("span",{className:"text-[11px]",children:"Nenhum artefato encontrado"})]})}),!h&&C.map(d=>{const v=B[d.kind];return e.jsxs(m,{className:"p-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsx("span",{className:"text-[11px] font-mono text-brand-mint truncate",children:d.path}),e.jsx(j,{variant:v.variant,size:"sm",children:v.label})]}),e.jsx("div",{className:"text-[10px] text-text-secondary leading-relaxed",children:d.summary}),e.jsxs("div",{className:"flex items-center gap-4 text-[9px] text-text-secondary",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{name:"schedule",size:"xs"}),e.jsx("span",{className:"font-mono",children:d.updatedAt})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(a,{name:"storage",size:"xs"}),e.jsx("span",{className:"font-mono",children:d.size})]})]})]},d.id)})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(m,{className:"p-4 space-y-3",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"Buscar"}),e.jsx("input",{type:"text",placeholder:"Buscar artefatos...",value:y,onChange:d=>f(d.target.value),className:"w-full bg-bg-base border border-border-panel rounded px-3 py-1.5 text-[10px] text-text-primary placeholder:text-text-secondary focus:outline-none focus:border-brand-mint/40"})]}),e.jsxs(m,{className:"p-4 space-y-3",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"Filtrar por Tipo"}),e.jsxs("div",{className:"flex flex-wrap gap-1.5",children:[e.jsx("button",{onClick:()=>i(null),className:`px-2 py-1 rounded border text-[8px] font-black uppercase tracking-widest transition-colors ${c===null?"border-brand-mint/50 text-brand-mint bg-brand-mint/10":"border-border-panel text-text-secondary hover:text-brand-mint"}`,children:"TODOS"}),Object.keys(B).map(d=>{const v=B[d];return e.jsx("button",{onClick:()=>i(d===c?null:d),className:`px-2 py-1 rounded border text-[8px] font-black uppercase tracking-widest transition-colors ${c===d?"border-brand-mint/50 text-brand-mint bg-brand-mint/10":"border-border-panel text-text-secondary hover:text-brand-mint"}`,children:v.label},d)})]})]}),e.jsxs(m,{className:"p-4 space-y-2 border-brand-mint/10",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(a,{name:"lightbulb",size:"xs"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-brand-mint",children:"Fonte"})]}),e.jsx("p",{className:"text-[10px] text-text-secondary leading-relaxed",children:t?"Artefatos via memory_search no Gateway OpenClaw (live).":"Gateway offline — exibindo dados mock. Conecte o Gateway pra ver memória real."})]})]})]})]})}const de={coordinator:{variant:"mint",label:"COORDENADOR"},"sub-agent":{variant:"blue",label:"SUB-AGENTE"},integration:{variant:"purple",label:"INTEGRAÇÃO"}};function me({agentId:n}){const{http:b,isLive:t}=J(),[x,p]=o.useState(null),[s,r]=o.useState(!1);o.useEffect(()=>{!t||!b||(r(!0),b.fileRead("config/agents.json").then(({content:h})=>{const u=JSON.parse(h),y=u.agents.find(f=>f.id===n)??u.agents[0];p(y??null)}).catch(()=>p(null)).finally(()=>r(!1)))},[t,b,n]);const c=x??se(n);if(s)return e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{icon:"settings",children:"CONFIGURAÇÃO"}),e.jsx(m,{className:"p-4 text-center text-text-secondary text-[10px]",children:"Carregando..."})]});if(!c)return e.jsxs("div",{className:"space-y-3",children:[e.jsx(g,{icon:"settings",children:"CONFIGURAÇÃO"}),e.jsx(m,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12 gap-3 text-text-secondary",children:[e.jsx(a,{name:"settings",size:"lg"}),e.jsx("span",{className:"text-[11px]",children:"Nenhuma configuração encontrada"})]})})]});const i=de[c.role]??{variant:"neutral",label:c.role.toUpperCase()};return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{icon:"settings",children:"CONFIGURAÇÃO"}),t?e.jsx(j,{variant:"mint",size:"sm",children:"LIVE"}):e.jsx(j,{variant:"neutral",size:"sm",children:"MOCK"})]}),e.jsxs("div",{className:"grid grid-cols-1 xl:grid-cols-3 gap-4",children:[e.jsx("div",{className:"xl:col-span-2 space-y-3",children:e.jsxs(m,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-brand-mint/10 flex items-center justify-center",children:e.jsx(a,{name:"smart_toy",size:"md"})}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-text-primary font-medium",children:c.name}),e.jsx(j,{variant:i.variant,size:"xs",children:i.label})]})]}),e.jsx(j,{variant:c.enabled?"mint":"red",size:"sm",children:c.enabled?"ATIVO":"INATIVO"})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"Modelo"}),e.jsx("div",{className:"text-[11px] font-mono text-text-primary",children:c.model})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"System Prompt"}),e.jsx("div",{className:"bg-bg-base rounded border border-border-panel p-3",children:e.jsx("p",{className:"text-[10px] font-mono text-text-secondary leading-relaxed whitespace-pre-wrap",children:c.systemPrompt})})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-bg-base rounded p-2",children:[e.jsx("div",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-1",children:"Temperature"}),e.jsx("div",{className:"text-sm font-mono text-text-primary",children:c.temperature})]}),e.jsxs("div",{className:"bg-bg-base rounded p-2",children:[e.jsx("div",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-1",children:"Max Tokens"}),e.jsx("div",{className:"text-sm font-mono text-text-primary",children:c.maxTokens.toLocaleString()})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"Ferramentas"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:c.tools.map(h=>e.jsxs(j,{variant:"neutral",size:"sm",children:[e.jsx(a,{name:"build",size:"xs"}),h]},h))})]})]})}),e.jsx("div",{children:e.jsxs(m,{className:"p-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx(a,{name:"menu_book",size:"xs"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"Fonte"})]}),e.jsx("p",{className:"text-[10px] text-text-secondary leading-relaxed",children:t?"Configuração via config/agents.json no workspace (live).":"Gateway offline — exibindo dados mock."})]})})]})]})}function pe({agentId:n,compact:b}){const t=o.useMemo(()=>_(n),[n]);if(!t)return b?e.jsxs("div",{className:"flex items-center gap-2 text-text-secondary",children:[e.jsx(a,{name:"token",size:"sm"}),e.jsx("span",{className:"text-[10px]",children:"Sem dados"})]}):e.jsxs(m,{className:"p-4",children:[e.jsx(g,{icon:"monitoring",children:"TOKENS"}),e.jsxs("div",{className:"flex flex-col items-center justify-center py-8 gap-2 text-text-secondary",children:[e.jsx(a,{name:"token",size:"lg"}),e.jsx("span",{className:"text-[10px]",children:"Sem dados de uso"})]})]});const x=t.totalTokensIn===0;if(b)return x?e.jsx("div",{className:"flex items-center gap-2",children:e.jsx(j,{variant:"purple",size:"sm",children:"API"})}):e.jsxs("div",{className:"bg-surface border border-border-panel rounded-md px-3 py-2 space-y-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(j,{variant:"blue",size:"sm",children:t.model}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"Hoje"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[8px] font-bold text-text-secondary",children:"IN"}),e.jsx("span",{className:"text-xs font-mono text-brand-mint",children:z(t.todayTokensIn)})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-[8px] font-bold text-text-secondary",children:"OUT"}),e.jsx("span",{className:"text-xs font-mono text-accent-blue",children:z(t.todayTokensOut)})]}),e.jsxs("span",{className:"text-[10px] font-mono text-text-secondary",children:["$",t.todayCostUSD.toFixed(2)]})]})]});if(x)return e.jsxs(m,{className:"p-4",children:[e.jsx(g,{icon:"monitoring",children:"TOKENS"}),e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx(j,{variant:"purple",size:"md",children:"API Integration"}),e.jsx("span",{className:"text-[10px] text-text-secondary",children:"Sem consumo de LLM"})]})]});const p=o.useMemo(()=>t.last7Days.length?Math.max(...t.last7Days.map(s=>Math.max(s.tokensIn,s.tokensOut))):1,[t.last7Days]);return e.jsxs(m,{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(g,{icon:"monitoring",children:"TOKENS"}),e.jsx(j,{variant:"blue",size:"sm",children:t.model})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"Hoje"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-bg-base rounded p-2",children:[e.jsx("div",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-1",children:"Tokens In"}),e.jsx("div",{className:"text-sm font-mono text-brand-mint",children:z(t.todayTokensIn)})]}),e.jsxs("div",{className:"bg-bg-base rounded p-2",children:[e.jsx("div",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-1",children:"Tokens Out"}),e.jsx("div",{className:"text-sm font-mono text-accent-blue",children:z(t.todayTokensOut)})]})]}),e.jsxs("div",{className:"bg-bg-base rounded p-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary",children:"Custo hoje"}),e.jsxs("span",{className:"text-xs font-mono text-text-primary",children:["$",t.todayCostUSD.toFixed(2)]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"Lifetime"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-bg-base rounded p-2",children:[e.jsx("div",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-1",children:"Total In"}),e.jsx("div",{className:"text-sm font-mono text-text-primary",children:z(t.totalTokensIn)})]}),e.jsxs("div",{className:"bg-bg-base rounded p-2",children:[e.jsx("div",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary mb-1",children:"Total Out"}),e.jsx("div",{className:"text-sm font-mono text-text-primary",children:z(t.totalTokensOut)})]})]}),e.jsxs("div",{className:"bg-bg-base rounded p-2 flex items-center justify-between",children:[e.jsx("span",{className:"text-[8px] font-black uppercase tracking-widest text-text-secondary",children:"Custo total"}),e.jsxs("span",{className:"text-xs font-mono text-text-primary",children:["$",t.estimatedCostUSD.toFixed(2)]})]})]}),t.last7Days.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:"ÚLTIMOS 7 DIAS"}),e.jsx("div",{className:"flex items-end gap-1.5 h-[32px]",children:t.last7Days.map(s=>{const r=Math.max(2,s.tokensIn/p*32),c=Math.max(2,s.tokensOut/p*32);return e.jsxs("div",{className:"flex-1 flex items-end gap-px",title:`${s.date}: In ${z(s.tokensIn)} / Out ${z(s.tokensOut)}`,children:[e.jsx("div",{className:"flex-1 rounded-sm bg-brand-mint/40",style:{height:`${r}px`}}),e.jsx("div",{className:"flex-1 rounded-sm bg-accent-blue/40",style:{height:`${c}px`}})]},s.date)})}),e.jsxs("div",{className:"flex items-center gap-3 justify-center",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-sm bg-brand-mint/40"}),e.jsx("span",{className:"text-[8px] text-text-secondary",children:"In"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-2 h-2 rounded-sm bg-accent-blue/40"}),e.jsx("span",{className:"text-[8px] text-text-secondary",children:"Out"})]})]})]})]})}const he=[{id:"kanban",label:"Kanban",icon:"view_kanban"},{id:"execucoes",label:"Execuções",icon:"terminal"},{id:"cron-jobs",label:"Cron Jobs",icon:"schedule"},{id:"heartbeat",label:"Heartbeat",icon:"monitor_heart"},{id:"memoria",label:"Memória",icon:"memory"},{id:"config",label:"Config",icon:"settings"}];function ge({agentId:n,onBack:b}){const[t,x]=o.useState("kanban"),{getAgentStatus:p}=E(),s=o.useMemo(()=>p(n),[n,p]),r=o.useMemo(()=>_(n),[n]);if(!s)return e.jsxs("div",{className:"flex flex-col items-center justify-center h-full gap-4 p-6",children:[e.jsx(a,{name:"error_outline",className:"text-4xl text-text-secondary/30"}),e.jsx("p",{className:"text-sm font-bold text-text-secondary",children:"Agente não encontrado"}),e.jsx("button",{onClick:b,className:"px-4 py-2 text-xs font-bold uppercase tracking-wide text-brand-mint hover:text-text-primary transition-colors",children:"Voltar"})]});const c=te[s.status],i=s.status==="online"||s.status==="busy",h=s.role==="coordinator"?"purple":s.role==="integration"?"blue":"mint",u=s.role==="coordinator"?"bg-accent-purple/10 border-accent-purple/20 text-accent-purple":s.role==="integration"?"bg-accent-blue/10 border-accent-blue/20 text-accent-blue":"bg-brand-mint/10 border-brand-mint/20 text-brand-mint",y=s.role==="coordinator"?"COORDENADOR":s.role==="integration"?"INTEGRAÇÃO":"SUB-AGENTE";return e.jsxs("div",{className:"flex flex-col h-full overflow-hidden animate-in fade-in duration-200",children:[e.jsx("div",{className:"p-6 border-b border-border-panel bg-bg-base shrink-0",children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-start gap-4 min-w-0",children:[e.jsx("button",{onClick:b,className:"mt-1 p-1.5 -ml-1 text-text-secondary hover:text-text-primary hover:bg-surface rounded-sm transition-all shrink-0",children:e.jsx(a,{name:"arrow_back",size:"md"})}),e.jsx("div",{className:A("size-12 rounded-md border flex items-center justify-center shrink-0",u),children:e.jsx(a,{name:s.icon||"smart_toy",className:"text-xl"})}),e.jsxs("div",{className:"min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("h1",{className:"text-base font-black text-text-primary",children:s.name}),e.jsx(k,{color:c.color,glow:i,size:"md"}),e.jsx("span",{className:"text-[9px] font-black uppercase tracking-widest text-text-secondary",children:c.label})]}),e.jsxs("div",{className:"mt-1.5 flex flex-wrap items-center gap-2",children:[e.jsx(j,{variant:h,size:"sm",children:y}),s.model&&e.jsxs(j,{variant:"neutral",size:"sm",children:[e.jsx(a,{name:"bolt",className:"text-[10px]"})," ",s.model]}),e.jsxs(j,{variant:"neutral",size:"sm",children:[e.jsx(a,{name:"timer",className:"text-[10px]"})," ",s.uptime]}),r&&r.todayTokensIn>0&&e.jsxs(j,{variant:"neutral",size:"sm",children:[e.jsx(a,{name:"token",className:"text-[10px]"})," ",z(r.todayTokensIn+r.todayTokensOut)," hoje"]}),s.successRate!=null&&e.jsxs(j,{variant:"mint",size:"sm",children:[e.jsx(a,{name:"check_circle",className:"text-[10px]"})," ",s.successRate,"%"]})]}),s.currentMission&&e.jsxs("p",{className:"mt-2 text-[10px] text-text-secondary font-bold truncate",children:[e.jsx(a,{name:"flag",size:"xs",className:"inline mr-1 text-brand-mint"}),s.currentMission]})]})]}),e.jsx("div",{className:"hidden lg:block shrink-0",children:e.jsx(pe,{agentId:n,compact:!0})})]})}),e.jsx(ae,{tabs:he,activeTab:t,onTabChange:x,accentColor:"mint"}),e.jsxs("div",{className:"flex-grow overflow-y-auto overflow-x-hidden p-6",children:[t==="kanban"&&e.jsx(re,{agentId:n}),t==="execucoes"&&e.jsx(ce,{agentId:n}),t==="cron-jobs"&&e.jsx(ie,{agentId:n}),t==="heartbeat"&&e.jsx(le,{agentId:n}),t==="memoria"&&e.jsx(oe,{agentId:n}),t==="config"&&e.jsx(me,{agentId:n})]})]},n)}export{ge as default};
